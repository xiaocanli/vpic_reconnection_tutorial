#! /usr/bin/env bash

deck=`echo $1 | sed 's,\.cxx,,g;s,\.cc,,g;s,\.cpp,,g;s,.*\/,,g'`

echo "/opt/cray/pe/craype/2.7.10/bin/CC  -DDISABLE_DYNAMIC_RESIZING -DMIN_NP=128 -DVPIC_USE_LEGACY_SORT -DVPIC_USE_OPENMP -DUSE_V4_AVX2 -DUSE_V8_AVX2 -DUSE_V16_AVX512 -DVPIC_ENABLE_HDF5 -g -O3 -inline-forceinline -qoverride-limits -no-ansi-alias -Winline -craype-verbose -qopt-report=5 -qopt-report-phase=all -diag-disable 10397 -Wl,--export-dynamic -dynamic -qopt-zmm-usage=high -qopenmp -I -std=c++11  -DVPIC_USE_LEGACY_SORT -qopenmp -DVPIC_USE_OPENMP -DUSE_V4_AVX2 -DUSE_V8_AVX2 -DUSE_V16_AVX512 -I. -I/global/homes/x/xiaocan/vpic_sources/vpic_hdf5_rebase/src -I -std=c++11  -DVPIC_USE_LEGACY_SORT -qopenmp -DVPIC_USE_OPENMP -DUSE_V4_AVX2 -DUSE_V8_AVX2 -DUSE_V16_AVX512 -DINPUT_DECK=$1 species_advance/advance_p_efield_pipeline_v4.cc species_advance/advance_p_efield_pipeline_v8.cc species_advance/advance_p_efield_pipeline_v16.cc species_advance/advance_p_efield_pipeline.cc species_advance/advance_p_efield.cc /global/homes/x/xiaocan/vpic_sources/vpic_hdf5_rebase/deck/main.cc /global/homes/x/xiaocan/vpic_sources/vpic_hdf5_rebase/deck/wrapper.cc -o $deck.Linux -Wl,-rpath,/global/homes/x/xiaocan/vpic_sources/vpic_hdf5_rebase/build -L/global/homes/x/xiaocan/vpic_sources/vpic_hdf5_rebase/build -lvpic     -lpthread -ldl"

/opt/cray/pe/craype/2.7.10/bin/CC  -DDISABLE_DYNAMIC_RESIZING -DMIN_NP=128 -DVPIC_USE_LEGACY_SORT -DVPIC_USE_OPENMP -DUSE_V4_AVX2 -DUSE_V8_AVX2 -DUSE_V16_AVX512 -DVPIC_ENABLE_HDF5 -g -O3 -inline-forceinline -qoverride-limits -no-ansi-alias -Winline -craype-verbose -qopt-report=5 -qopt-report-phase=all -diag-disable 10397 -Wl,--export-dynamic -dynamic -qopt-zmm-usage=high -qopenmp -I -std=c++11  -DVPIC_USE_LEGACY_SORT -qopenmp -DVPIC_USE_OPENMP -DUSE_V4_AVX2 -DUSE_V8_AVX2 -DUSE_V16_AVX512 -I. -I/global/homes/x/xiaocan/vpic_sources/vpic_hdf5_rebase/src -I -std=c++11  -DVPIC_USE_LEGACY_SORT -qopenmp -DVPIC_USE_OPENMP -DUSE_V4_AVX2 -DUSE_V8_AVX2 -DUSE_V16_AVX512 -DINPUT_DECK=$1 species_advance/advance_p_efield_pipeline_v4.cc species_advance/advance_p_efield_pipeline_v8.cc species_advance/advance_p_efield_pipeline_v16.cc species_advance/advance_p_efield_pipeline.cc species_advance/advance_p_efield.cc /global/homes/x/xiaocan/vpic_sources/vpic_hdf5_rebase/deck/main.cc /global/homes/x/xiaocan/vpic_sources/vpic_hdf5_rebase/deck/wrapper.cc -o $deck.Linux -Wl,-rpath,/global/homes/x/xiaocan/vpic_sources/vpic_hdf5_rebase/build -L/global/homes/x/xiaocan/vpic_sources/vpic_hdf5_rebase/build -lvpic     -lpthread -ldl
