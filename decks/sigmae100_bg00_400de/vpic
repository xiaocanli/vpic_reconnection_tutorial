#! /usr/bin/env bash

deck=`echo $1 | sed 's,\.cxx,,g;s,\.cc,,g;s,\.cpp,,g;s,.*\/,,g'`

echo "/opt/cray/pe/craype/2.7.30/bin/CC  -DDISABLE_DYNAMIC_RESIZING -DMIN_NP=128 -DVPIC_USE_LEGACY_SORT -DVPIC_USE_OPENMP -DUSE_V4_AVX2 -DUSE_V8_AVX2 -DVPIC_ENABLE_HDF5 -g -O2 -ffast-math -fno-unsafe-math-optimizations -fomit-frame-pointer -fno-strict-aliasing -Winline -rdynamic -dynamic -fopenmp -I -std=c++11  -DVPIC_USE_LEGACY_SORT -fopenmp -DVPIC_USE_OPENMP -DUSE_V4_AVX2 -DUSE_V8_AVX2 -I. -I/global/cfs/cdirs/m2407/xiaocanli/vpic_hdf5_rebase/src -I -std=c++11  -DVPIC_USE_LEGACY_SORT -fopenmp -DVPIC_USE_OPENMP -DUSE_V4_AVX2 -DUSE_V8_AVX2 -DINPUT_DECK=$1 species_advance/advance_p_efield_pipeline_v4.cc species_advance/advance_p_efield_pipeline_v8.cc species_advance/advance_p_efield_pipeline_v16.cc species_advance/advance_p_efield_pipeline.cc species_advance/advance_p_efield.cc /global/cfs/cdirs/m2407/xiaocanli/vpic_hdf5_rebase/deck/main.cc /global/cfs/cdirs/m2407/xiaocanli/vpic_hdf5_rebase/deck/wrapper.cc -o $deck.Linux -Wl,-rpath,/global/cfs/cdirs/m2407/xiaocanli/vpic_hdf5_rebase/build_perlmutter -L/global/cfs/cdirs/m2407/xiaocanli/vpic_hdf5_rebase/build_perlmutter -lvpic    -lpthread -ldl"

/opt/cray/pe/craype/2.7.30/bin/CC  -DDISABLE_DYNAMIC_RESIZING -DMIN_NP=128 -DVPIC_USE_LEGACY_SORT -DVPIC_USE_OPENMP -DUSE_V4_AVX2 -DUSE_V8_AVX2 -DVPIC_ENABLE_HDF5 -g -O2 -ffast-math -fno-unsafe-math-optimizations -fomit-frame-pointer -fno-strict-aliasing -Winline -rdynamic -dynamic -fopenmp -I -std=c++11  -DVPIC_USE_LEGACY_SORT -fopenmp -DVPIC_USE_OPENMP -DUSE_V4_AVX2 -DUSE_V8_AVX2 -I. -I/global/cfs/cdirs/m2407/xiaocanli/vpic_hdf5_rebase/src -I -std=c++11  -DVPIC_USE_LEGACY_SORT -fopenmp -DVPIC_USE_OPENMP -DUSE_V4_AVX2 -DUSE_V8_AVX2 -DINPUT_DECK=$1 species_advance/advance_p_efield_pipeline_v4.cc species_advance/advance_p_efield_pipeline_v8.cc species_advance/advance_p_efield_pipeline_v16.cc species_advance/advance_p_efield_pipeline.cc species_advance/advance_p_efield.cc /global/cfs/cdirs/m2407/xiaocanli/vpic_hdf5_rebase/deck/main.cc /global/cfs/cdirs/m2407/xiaocanli/vpic_hdf5_rebase/deck/wrapper.cc -o $deck.Linux -Wl,-rpath,/global/cfs/cdirs/m2407/xiaocanli/vpic_hdf5_rebase/build_perlmutter -L/global/cfs/cdirs/m2407/xiaocanli/vpic_hdf5_rebase/build_perlmutter -lvpic    -lpthread -ldl
